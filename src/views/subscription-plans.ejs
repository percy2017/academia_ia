<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <%- include('partials/messages') %>
            <!-- <div class="card">
                <div class="card-header">
                    <h5>Nuestros Planes de Suscripción</h5>
                </div> -->
                <!-- <div class="card-body"> -->
                    <!-- <p class="lead">Elige el plan que mejor se adapte a tus necesidades de aprendizaje.</p> -->
                    
                    <% if (plans && plans.length > 0) { %>
                        <div class="row row-cols-1 row-cols-md-4 mb-3 text-center justify-content-center">
                            <% plans.forEach(plan => { 
                                const isRecommended = plan.name.toLowerCase().includes('anual');
                            %>
                                <div class="col">
                                    <div class="card mb-4 rounded-3 shadow-sm <%= isRecommended ? 'border-primary' : '' %>">
                                        <div class="card-header py-3 <%= isRecommended ? 'text-white bg-primary border-primary' : '' %>">
                                            <h4 class="my-0 fw-normal"><%= plan.name %></h4>
                                        </div>
                                        <div class="card-body d-flex flex-column">
                                            <h1 class="card-title pricing-card-title display-4 fw-bold">$<%= plan.price.toFixed(2) %></h1>
                                            <p class="text-muted mb-4">
                                                <% if (usdToBobRate) { %>
                                                    aprox. <%= (plan.price * usdToBobRate).toFixed(2) %> Bs
                                                <% } else { %>
                                                    / total
                                                <% } %>
                                            </p>
                                            <ul class="list-unstyled mt-3 mb-4 text-start">
                                                <li><i class="bi bi-calendar-check me-2"></i><%= plan.durationMonths %> mes(es) de acceso</li>
                                                <% if (plan.bonusMonths) { %>
                                                    <li class="text-success"><i class="bi bi-gift-fill me-2"></i>+ <%= plan.bonusMonths %> mes(es) de bono</li>
                                                <% } %>
                                                <li><i class="bi bi-book-fill me-2"></i>Acceso a todos los cursos</li>
                                                <li><i class="bi bi-headset me-2"></i>Soporte prioritario</li>
                                            </ul>
                                            <a href="/subscription-plans/checkout/<%= plan.id %>" class="w-100 btn btn-lg <%= isRecommended ? 'btn-primary' : 'btn-outline-primary' %> mt-auto">
                                                Seleccionar Plan
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            <% }); %>
                        </div>
                    <% } else { %>
                        <div class="alert alert-info" role="alert">
                            Actualmente no hay planes de suscripción disponibles. Por favor, vuelve a intentarlo más tarde.
                        </div>
                    <% } %>
                <!-- </div> -->
            <!-- </div> -->
        </div>
    </div>
</div>
